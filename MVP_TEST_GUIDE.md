# MVP功能测试指南

## 🎯 核心功能

文本归档助手MVP版本包含以下核心功能：
1. ✅ 用户注册
2. ✅ 用户登录
3. ✅ 文件上传
4. ✅ OCR文字识别
5. ✅ OCR结果预览和编辑

## 🚀 快速启动

### 1. 启动后端服务

```bash
cd backend
conda activate ocr_agent
python main.py
```

后端服务将在 `http://localhost:8000` 启动

### 2. 启动前端服务

```bash
cd frontend
npm run dev
```

前端服务将在 `http://localhost:5173` 启动

## 📝 功能测试流程

### 测试1: 用户注册

1. 访问 `http://localhost:5173`
2. 点击首页的"登录"按钮
3. 点击"还没有账号？立即注册"
4. 填写注册表单：
   - 用户名：testuser（至少3个字符）
   - 邮箱：test@example.com
   - 密码：test123（至少6个字符）
   - 确认密码：test123
5. 点击"注册"按钮
6. ✅ 应该看到"注册成功！正在跳转..."
7. ✅ 自动跳转到首页，右上角显示"欢迎回来！"和"登出"按钮

### 测试2: 用户登录

1. 如果已登录，先点击"登出"
2. 点击"登录"按钮
3. 填写登录表单：
   - 用户名：testuser
   - 密码：test123
4. 点击"登录"按钮
5. ✅ 应该跳转到首页
6. ✅ 右上角显示登录状态

### 测试3: 文件上传

1. 确保已登录
2. 点击首页的"🔍 OCR识别" -> "开始使用"
3. 在上传区域：
   - 点击"选择文件"或拖拽图片文件
   - 支持格式：JPG, PNG, BMP
   - 文件大小限制：10MB
4. ✅ 应该看到文件上传成功的提示
5. ✅ 显示"开始识别"按钮

### 测试4: OCR识别

1. 上传包含文字的图片后
2. 点击"开始识别"按钮
3. ✅ 应该看到"识别中..."状态
4. ✅ 识别完成后显示识别结果
5. ✅ 显示识别的文本内容
6. ✅ 显示每行文本的置信度

### 测试5: 编辑OCR结果

1. 在识别结果页面
2. 点击"编辑"按钮
3. 修改识别的文本
4. 点击"保存"按钮
5. ✅ 应该看到"保存成功"提示
6. ✅ 文本更新为编辑后的内容

## 🧪 后端API测试

### 运行所有测试

```bash
cd backend
conda activate ocr_agent
python -m pytest tests/ -v
```

### 运行特定测试

```bash
# 认证测试
python -m pytest tests/test_auth.py -v

# 文件上传测试
python -m pytest tests/test_upload.py -v

# OCR测试
python -m pytest tests/test_ocr.py -v

# 属性测试
python -m pytest tests/property_tests/ -v
```

## ✅ 预期测试结果

- **认证测试**: 12个测试全部通过
- **文件上传测试**: 21个测试全部通过
- **OCR测试**: 8个测试全部通过
- **属性测试**: 约48个测试全部通过

## 🔍 常见问题

### 问题1: 前端无法连接后端

**解决方案**:
- 确保后端服务在 `http://localhost:8000` 运行
- 检查 `frontend/src/api/client.ts` 中的 baseURL 配置

### 问题2: OCR识别失败

**解决方案**:
- 确保图片格式正确（JPG, PNG, BMP）
- 确保图片包含清晰的文字
- 检查图片大小不超过10MB
- 查看后端日志获取详细错误信息

### 问题3: 登录后无法访问功能

**解决方案**:
- 检查浏览器控制台是否有错误
- 确认 localStorage 中有 token
- 尝试清除浏览器缓存后重新登录

### 问题4: 注册时提示用户名已存在

**解决方案**:
- 使用不同的用户名
- 或删除数据库文件 `backend/text_archive.db` 重新开始

## 📊 测试数据

### 测试用户账号

```
用户名: testuser
邮箱: test@example.com
密码: test123
```

### 测试图片

建议使用包含以下内容的图片：
- 清晰的打印文字
- 中英文混合文本
- 简单的背景
- 适中的分辨率（300x300 到 2000x2000）

## 🎉 MVP功能验收标准

### 必须通过的测试

- [x] 用户可以成功注册
- [x] 用户可以成功登录
- [x] 登录后可以上传图片
- [x] 可以识别图片中的文字
- [x] 可以查看识别结果
- [x] 可以编辑识别结果
- [x] 可以登出系统
- [x] 所有后端测试通过

### 用户体验

- [x] 界面友好，操作直观
- [x] 错误提示清晰
- [x] 加载状态明确
- [x] 响应速度快

## 📝 下一步开发

MVP完成后，可以继续开发：
1. AI分类服务（日程/备忘录分类）
2. 日程管理功能
3. 备忘录管理功能
4. 搜索功能
5. 数据同步功能

---

**最后更新**: 2025-11-24
**MVP状态**: ✅ 完成
