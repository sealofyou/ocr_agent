# 需求文档

## 简介

手写管理助手是一个跨端应用，旨在帮助用户整理和归档文本内容，包括日程安排和日记/备忘录。系统使用OCR技术识别文本内容，并通过AI模型自动分类和整理，将日程信息和日记内容分别归档到相应的存储位置。前端使用Vue和Tailwind CSS构建，后端使用Python，集成PaddleOCR-VL模型进行文本识别和分类。

## 术语表

- **手写管理助手 (Text Archive Assistant)**: 本系统的名称，用于整理和归档用户的文本内容
- **OCR引擎 (OCR Engine)**: 使用PaddleOCR-VL的光学字符识别组件
- **AI分类器 (AI Classifier)**: 基于Parallax部署的模型，用于识别和分类文本内容
- **日程项 (Schedule Item)**: 包含时间、事件描述的日程安排条目
- **备忘录 (Memo)**: 用户的日记、笔记或其他个人记录
- **前端客户端 (Frontend Client)**: 使用Vue和Tailwind CSS构建的用户界面
- **后端服务 (Backend Service)**: 使用Python构建的服务端应用
- **归档存储 (Archive Storage)**: 存储已分类文本内容的持久化层

## 需求

### 需求 1

**用户故事:** 作为用户，我希望能够上传或输入文本内容，以便系统能够识别和处理我的文字记录

#### 验收标准

1. WHEN 用户通过前端客户端上传图片文件 THEN 手写管理助手 SHALL 接收该文件并将其传递给OCR引擎
2. WHEN 用户使用设备摄像头拍照 THEN 前端客户端 SHALL 捕获照片并将其传递给OCR引擎
3. WHEN 用户在前端客户端的输入框中直接输入文本 THEN 手写管理助手 SHALL 接收该文本内容
4. WHEN 用户上传的图片文件格式不被支持 THEN 手写管理助手 SHALL 拒绝该文件并向用户显示支持的格式列表
5. WHEN 用户上传的文件大小超过10MB THEN 手写管理助手 SHALL 拒绝该文件并提示用户文件过大
6. THE 手写管理助手 SHALL 支持JPG、PNG、JPEG和BMP格式的图片文件

### 需求 2

**用户故事:** 作为用户，我希望系统能够自动识别图片中的文字，以便我不需要手动输入内容

#### 验收标准

1. WHEN OCR引擎接收到图片文件 THEN OCR引擎 SHALL 提取图片中的所有可识别文本
2. WHEN 图片中包含多种语言的文本 THEN OCR引擎 SHALL 识别中文和英文内容
3. WHEN OCR引擎无法识别任何文本 THEN OCR引擎 SHALL 返回空结果并记录警告信息
4. WHEN OCR识别完成 THEN 后端服务 SHALL 将识别结果返回给前端客户端进行预览
5. WHEN OCR识别的文本包含明显错误 THEN 前端客户端 SHALL 允许用户手动编辑识别结果

### 需求 3

**用户故事:** 作为用户，我希望系统能够自动区分日程和日记内容，以便内容能够被正确分类

#### 验收标准

1. WHEN AI分类器接收到文本内容 THEN AI分类器 SHALL 分析文本并判断其类型为日程项或备忘录
2. WHEN 文本内容包含明确的时间信息和事件描述 THEN AI分类器 SHALL 将其分类为日程项
3. WHEN 文本内容为个人记录、想法或日记形式 THEN AI分类器 SHALL 将其分类为备忘录
4. WHEN 文本内容同时包含日程和日记特征 THEN AI分类器 SHALL 将其分类为主要特征所对应的类型
5. WHEN AI分类器无法确定文本类型 THEN 后端服务 SHALL 提示用户手动选择分类

### 需求 4

**用户故事:** 作为用户，我希望日程信息能够被结构化存储，以便我可以按时间查看和管理我的安排

#### 验收标准

1. WHEN 文本被分类为日程项 THEN 后端服务 SHALL 从文本中提取时间、日期和事件描述信息
2. WHEN 日程项被创建 THEN 归档存储 SHALL 保存包含时间、日期、事件描述和原始文本的结构化数据
3. WHEN 用户请求查看日程 THEN 前端客户端 SHALL 按时间顺序显示所有日程项
4. WHEN 日程项缺少时间信息 THEN 后端服务 SHALL 提示用户补充时间信息
5. THE 手写管理助手 SHALL 支持按日期范围筛选日程项

### 需求 5

**用户故事:** 作为用户，我希望日记和备忘录能够被妥善保存，以便我可以随时查看和回顾

#### 验收标准

1. WHEN 文本被分类为备忘录 THEN 后端服务 SHALL 提取创建时间和内容摘要
2. WHEN 备忘录被创建 THEN 归档存储 SHALL 保存包含创建时间、内容摘要、完整文本和可选标签的数据
3. WHEN 用户请求查看备忘录 THEN 前端客户端 SHALL 按创建时间倒序显示所有备忘录
4. THE 手写管理助手 SHALL 支持用户为备忘录添加自定义标签
5. THE 手写管理助手 SHALL 支持按标签筛选备忘录

### 需求 6

**用户故事:** 作为用户，我希望能够在不同设备上访问我的归档内容，以便实现跨端同步

#### 验收标准

1. WHEN 用户在任意设备上登录 THEN 手写管理助手 SHALL 显示该用户的所有归档内容
2. WHEN 用户在一个设备上创建或修改内容 THEN 后端服务 SHALL 立即将更改同步到归档存储
3. WHEN 用户在另一个设备上刷新页面 THEN 前端客户端 SHALL 显示最新的归档内容
4. WHEN 网络连接中断 THEN 前端客户端 SHALL 在本地缓存用户操作并在连接恢复后同步
5. THE 手写管理助手 SHALL 支持Web浏览器和移动设备访问

### 需求 7

**用户故事:** 作为用户，我希望能够搜索我的归档内容，以便快速找到特定的信息

#### 验收标准

1. WHEN 用户在搜索框中输入关键词 THEN 手写管理助手 SHALL 在所有归档内容中搜索匹配的文本
2. WHEN 搜索结果包含多个匹配项 THEN 前端客户端 SHALL 按相关度排序显示结果
3. WHEN 用户搜索日程项 THEN 手写管理助手 SHALL 在时间、日期和事件描述字段中搜索
4. WHEN 用户搜索备忘录 THEN 手写管理助手 SHALL 在内容摘要、完整文本和标签中搜索
5. THE 手写管理助手 SHALL 支持模糊搜索和精确搜索两种模式

### 需求 8

**用户故事:** 作为用户，我希望系统界面简洁美观，以便获得良好的使用体验

#### 验收标准

1. THE 前端客户端 SHALL 使用Tailwind CSS实现响应式布局
2. WHEN 用户在移动设备上访问 THEN 前端客户端 SHALL 自动适配屏幕尺寸
3. WHEN 用户执行操作 THEN 前端客户端 SHALL 在500毫秒内提供视觉反馈
4. THE 前端客户端 SHALL 使用清晰的视觉层次区分日程和备忘录内容
5. WHEN 系统处理耗时操作 THEN 前端客户端 SHALL 显示加载指示器

### 需求 9

**用户故事:** 作为系统管理员，我希望系统能够扩展支持更多AI模型，以便未来增强功能

#### 验收标准

1. THE 后端服务 SHALL 使用模块化架构设计AI模型接口
2. WHEN 添加新的AI模型 THEN 后端服务 SHALL 允许通过配置文件注册新模型而无需修改核心代码
3. WHEN 多个AI模型可用 THEN 后端服务 SHALL 支持根据任务类型选择合适的模型
4. THE 后端服务 SHALL 记录每个AI模型的调用次数和响应时间
5. WHEN AI模型调用失败 THEN 后端服务 SHALL 记录错误信息并尝试使用备用模型

### 需求 10

**用户故事:** 作为用户，我希望我的数据是安全的，以便保护我的隐私

#### 验收标准

1. WHEN 用户注册或登录 THEN 后端服务 SHALL 使用加密算法存储用户密码
2. WHEN 用户访问归档内容 THEN 后端服务 SHALL 验证用户身份和访问权限
3. WHEN 数据在网络传输 THEN 手写管理助手 SHALL 使用HTTPS协议加密通信
4. THE 归档存储 SHALL 确保每个用户只能访问自己的归档内容
5. WHEN 用户删除归档内容 THEN 归档存储 SHALL 永久删除该数据且不可恢复
