# 手机端访问配置说明

## 问题描述
手机通过局域网访问前端 `http://192.168.1.4:5173/` 时，登录报错账密错误，但电脑端使用相同账密可以正常登录。

## 问题原因
前端API配置使用的是 `http://127.0.0.1:8000`，这个地址只能在本机访问。手机无法连接到电脑的 `127.0.0.1`，导致API请求失败。

## 解决方案

### 1. 修改前端API配置
**文件**: `frontend/src/api/client.ts`

将 baseURL 从 `http://127.0.0.1:8000/api/v1` 改为 `http://192.168.1.4:8000/api/v1`

```typescript
const apiClient = axios.create({
  baseURL: 'http://192.168.1.4:8000/api/v1',  // 使用局域网IP
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json'
  }
})
```

### 2. 更新后端CORS配置
**文件**: `backend/app/core/config.py`

添加局域网前端地址到允许的跨域源：

```python
allow_origins: list[str] = [
    "http://localhost:5173", 
    "http://127.0.0.1:5173",
    "http://192.168.1.4:5173"  # 添加局域网地址
]
```

### 3. 确保后端监听所有网络接口
**文件**: `backend/.env`

确认 HOST 配置为 `0.0.0.0`（已配置）：
```
HOST=0.0.0.0
PORT=8000
```

## 使用步骤

1. **重启后端服务**
   ```bash
   # 停止当前后端服务（Ctrl+C）
   # 重新启动
   start_backend.bat
   ```

2. **重启前端服务**
   ```bash
   # 停止当前前端服务（Ctrl+C）
   # 重新启动
   start_frontend.bat
   ```

3. **手机访问**
   - 确保手机和电脑在同一局域网
   - 手机浏览器访问: `http://192.168.1.4:5173/`
   - 使用相同的账号密码登录

## 验证
- ✅ 电脑端访问: `http://localhost:5173/` 或 `http://127.0.0.1:5173/`
- ✅ 手机端访问: `http://192.168.1.4:5173/`
- ✅ 两端都能正常登录和使用

## 注意事项
- 如果电脑IP地址变化，需要同步更新前端配置和后端CORS配置
- 确保防火墙允许 5173 和 8000 端口的访问
- 生产环境建议使用环境变量配置API地址，而不是硬编码
